<h1>Détails de la demande de retrait</h1>

<%# Mode test! : Accessible qu'aux admins une fois implémenté, il faudra faire les modifications nécessaires %>

<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>Association:</th>
        <th>Montant:</th>
        <th>Date de demande:</th>
        <th>Statut actuel:</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= @withdrawal.organisation.name %></td>
        <td><%= number_to_currency(@withdrawal.amount, unit: '€') %></td>
        <td><%= @withdrawal.created_at.strftime("%d %B %Y %H:%M") %></td>
        <td><%= @withdrawal.cagnotte_status&.status %></td>
      </tr>
    </tbody>
  </table>
</div>

<%= form_with(model: @withdrawal, url: update_status_withdrawal_path(@withdrawal), method: :patch) do |form| %>
  <div class="field">
    <%= form.label :new_status, 'Nouveau statut' %>
    <%= form.select :new_status, options_for_select(['En cours de traitement', 'Demande traitée']), { prompt: 'Sélectionner un statut' } %>
  </div>
  <%= form.submit 'Mettre à jour le statut' %>
<% end %>

<%= link_to 'Retour à la liste des demandes', admin_withdraw_withdrawals_path %>