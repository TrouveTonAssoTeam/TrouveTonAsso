
<%= stylesheet_link_tag 'events', media: 'all' %>
<div class="event-details">
  <% if @event.cover_photo.attached? %>
    <%= image_tag url_for(@event.cover_photo), class: "img-fluid rounded-image" %>
  <% else %>
    <p>Aucune photo de couverture disponible</p>
  <% end %>
  
  <div class="event-header">
    <h1><%= @event.name %></h1>
  </div>


  <% if @event.start_date > Time.now %>
  <p>Statut : <span style="color: green;">À venir</span></p>
  <% else %>
  <p>Statut : <span style="color: red;">En cours</span></p>
  <% end %>


  <div class="event-description">
    <p><strong>Description :</strong> <%= @event.description %></p>
    <p><strong>Date de début :</strong> <%= @event.start_date %></p>
    <p><strong>Date de fin :</strong> <%= @event.end_date %></p>

   <% if @event.participants.any? %>
    <p><strong>Nombre de participants :</strong> <%= @event.participants.count %></p>
   <% else %>
    <p>Aucun participant pour cet événement pour le moment.</p>
   <% end %>
  </div>
    
    <!-- Autres détails de l'événement -->
    
    <% if user_signed_in? %>
      <% if current_user.events.include?(@event) %>
        <%= link_to 'Se désinscrire', unattend_event_path(@event), data:{turbo_method: :delete}, method: :delete, class: 'btn btn-danger' %>
      <% else %>
        <%= link_to 'S\'inscrire à l\'événement', attend_event_path(@event), class: 'btn btn-primary'%>
      <% end %>
    <% else %>
      <%= link_to 'Se connecter pour s\'inscrire', new_user_session_path, class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>
